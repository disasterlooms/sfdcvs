<apex:page standardController="Account" recordSetVar="accounts">
<apex:includescript value="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" />
<script type="text/javascript" 
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBTgBcbGodiFfUPS-6rnQLKbF5c1s7KyFI"> 
    </script> 

<!-- Set the map to take up the whole window -->
<style>
    html, body { height: 100%; }
    .page-map, .ui-content, #map-canvas { width: 100%; height:100%; padding: 0; }
    #map-canvas { height: min-height: 100%; }
</style> 
 
 <apex:remoteObjects >
  <apex:remoteObjectModel name="Account" fields="Id,Name,LastModifiedDate,CreatedDate,BillingStreet,BillingCity,BillingState,BillingPostalCode">
 </apex:remoteObjectModel>

</apex:remoteObjects> 

 <script>
 
        
        
        </script>
 
 
 
 
    <script>
   
    </script>
    <script>
    function update(){
    //alert('alert');
    var $j = jQuery.noConflict();
    var account = new SObjectModel.Account();
    var myLatLng = {lat: -25.363, lng: 131.044};

        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 4,
          center: myLatLng
        });

      
    account.retrieve(
     { limit: 2 },
      function(error, records) {
        if (error) {
          alert(error.message);
        } else {
         records.forEach(function(record) {
         
        street = record.get('BillingStreet');
        city = record.get('BillingCity');
        state = record.get('BillingState');
        zip = record.get('BillingPostalCode');
        
        var marker = new google.maps.Marker({
          position: street+' '+city+' '+state+' '+zip,
          map: map,
          title: 'Hello World!'
        });
        
       });
    }
    //var name = records;
    
    console.log(records);
    repeatname(records);
    
    });
    
       }
    
    </script>
 <apex:pageBlock >
<head>
 

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
<script type="text/javascript"> 
 
$(document).ready(function() {
  
  var myOptions = {
    zoom: 9,
    mapTypeId: google.maps.MapTypeId.HYBRID,
    mapTypeControl: true
  }
  
  var map;
  var marker;
  
  var geocoder = new google.maps.Geocoder();
  var address = "10 pointe dr brea, ca";
  
  var infowindow = new google.maps.InfoWindow({
    content: "<b>{!Account.Name}</b>"
  });
 //Notes where I left off... need to be able to center map..geocode the userid first...then after that, need to be able to add markers for all the query results... the most difficult part of the equation
        
  
  geocoder.geocode( { address: address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK && results.length) {
      if (status != google.maps.GeocoderStatus.ZERO_RESULTS) {
      
        //create map
        map = new google.maps.Map(document.getElementById("map"), myOptions);
      
        //center map
        map.setCenter(results[0].geometry.location);
        console.log(address);
        
        
        //create marker
            marker = new google.maps.Marker({
            position: results[0].geometry.location,
            map: map,
            title: "{!Account.Name}"
        });
        
        var myLatLng1 = {lat: 34.0868529,lng: -117.7070802};
        var position = {lat: -25.363, lng: 131.044};

        var marker1 = new google.maps.Marker({
        position: position,
        map: map,
        title: 'Hello World!'
        //console.log(position);
      });
        
        //add listeners
        google.maps.event.addListener(marker, 'click', function() {
          infowindow.open(map,marker);
        });
        google.maps.event.addListener(infowindow, 'closeclick', function() {
          map.setCenter(marker.getPosition()); 
        });
        
      }
      
    } else {
      $('#map').css({'height' : '30px'});
      $('#map').html("Oops! {!Account.Name}'s address could not be found, please make sure the address is correct.");
      resizeIframe();
    }
  });
  
  function resizeIframe() {
    var me = window.name;
    if (me) {
      var iframes = parent.document.getElementsByName(me);
      if (iframes && iframes.length == 1) {
        height = document.body.offsetHeight;
        iframes[0].style.height = height + "px";
      }
    }
  }
  
});
</script>
 
<style>
#map {
  font-family: Arial;
  font-size:12px;
  line-height:normal !important;
  height:200px;
  background:transparent;
  size:portrait;
}

</style>
 
</head>
 
<body>
<div id="map"></div> 
</body> 
</apex:pageBlock>


</apex:page>