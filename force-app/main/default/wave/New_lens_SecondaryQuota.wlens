{"dataSourceLinks":[],"filters":[],"gridLayouts":[],"layouts":[],"steps":{"saql":{"broadcastFacet":true,"groups":[],"label":"SecondaryQuota","numbers":[],"query":"q = load \"SalesData\";\nq = filter q by 'Reseller.Name' == \"CDW\";\nq = filter q by 'NationalAcctsSalesOut' == \"true\";\nq = filter q by date('INVOICE_DATE_Year', 'INVOICE_DATE_Month', 'INVOICE_DATE_Day') in [dateRange([2019,7,1], [2019,9,30])];\nq = filter q by 'CDWProductFo' == \"Monitor\";\nresult = group q by ('Reseller.Name','CDWProductFo');\nresult = foreach result generate q.'Reseller.Name' as 'Reseller.Name', q.'CDWProductFo' as 'Product' , sum(q.'REVENUE') as 'Revenue';\nresult = order result by ('Reseller.Name' asc);\nresult = limit result 2000;\n\n\nq = filter q by 'ProductFocusType' in [\"Monitor\"];\nresult = group q by ('Reseller.Assigned_Rep__c', 'ProductFocusType');\nresult = foreach result generate q.'Reseller.Assigned_Rep__c' as 'Reseller.Name', q.'ProductFocusType' as 'Product', sum(q.'REVENUE') as 'Revenue',avg(q.WeekinQ) as 'WeekinQ';\nresult = limit result 2000;\nq4 = load \"VSAQuotas\";\nq4 = filter q4 by date('Date_Year', 'Date_Month', 'Date_Day') in [dateRange([2019,7,1], [2019,9,30])];\nresult4 = group q4 by ('Assignment','Focus');\nresult4 = foreach result4 generate q4.'Assignment' as 'Assignment', q4.'Focus' as 'Product', sum(q4.'Assignment_Quota') as 'Quota';\nresult4 = order result4 by ('Assignment' asc);\nresult4 = limit result4 2000;\n\n\n\n\n\n\nq5 = cogroup result by ('Reseller.Name','Product'),result4 by ('Assignment','Product');\n\nq6 = foreach q5 generate result.'Reseller.Name' as 'Rep', result.'Product' as 'Product', sum(result.'Revenue') as 'Revenue', sum(result4.'Quota') as 'Quota', avg(result.'WeekinQ') as 'WeekinQ';\nq6 = foreach q6 generate 'Rep', 'Product','Revenue',  'Quota',  'WeekinQ', 'Revenue'/'Quota' as '% Attained', ('Revenue'/'WeekinQ') * 13 as '$ Trend';\nq6 = foreach q6 generate 'Rep' as 'ResellerRep', 'Product' as 'Focus','Revenue',  'Quota',  'WeekinQ', '% Attained','$ Trend', '$ Trend'/'Quota' as '% Trend';\n\n--Above This line is for CDW which has 2 Focus Product goals that are not part of the Director goal and must be separated.\nq = load \"SalesData\";\nq = filter q by 'ConsumerAccounts' == \"true\";\nq = filter q by date('INVOICE_DATE_Year', 'INVOICE_DATE_Month', 'INVOICE_DATE_Day') in [dateRange([2016,10,1], [2055,12,31])];\nq1 = filter q by date('INVOICE_DATE_Year', 'INVOICE_DATE_Month', 'INVOICE_DATE_Day') in [dateRange([2019,7,1], [2019,9,30])];cdw = filter q1 by 'CDWProductFo' in [\"IFP/CD/PJ\"];cdw = filter cdw by 'Reseller.Name' == \"CDW\";cdw = group cdw by ('Reseller.Assigned_Rep__c', 'CDWProductFo');cdw = foreach cdw generate q.'Reseller.Assigned_Rep__c' as 'ResellerRep', q.'CDWProductFo' as 'ProductFocusType', sum(q.'REVENUE') as 'Revenue',avg(q.WeekinQ) as 'WeekinQ';cdw = limit cdw 2000;\n\n\nresult = group q by ('ResellerRep','ConsumerFocus')  full,q1 by ('ResellerRep','ConsumerFocus');\nresult = foreach result generate q.'ResellerRep' as 'ResellerRep', q.'ConsumerFocus' as 'ConsumerFocus', sum(q1.'REVENUE') as 'Revenue',avg(q.WeekinQ) as 'WeekinQ';\nresult = limit result 2000;\nq4 = load \"VSAQuotas\";\nq4 = filter q4 by date('Date_Year', 'Date_Month', 'Date_Day') in [dateRange([2019,7,1], [2019,9,30])];\nresult4 = group q4 by ('Assignment','Focus');\nresult4 = foreach result4 generate 'Assignment','Focus', sum(q4.'Assignment_Quota') as 'Quota';\nresult4 = limit result4 2000;\n\n disti = group q1 by all;\n disti = foreach disti generate \"US Distribution VAR\" as 'Reseller',sum(q1.'REVENUE') as 'Revenue',avg(q1.'DayinQ') as 'DayinQ', sum(sum('Trend')) over([..] partition by all) as '$ Trend';disti = cogroup disti by 'Reseller',result4 by 'Assignment';disti = foreach disti generate disti.'Reseller' as 'Reseller', sum(disti.'Revenue') as 'Revenue', sum(result4.'Quota') as 'Quota', avg(disti.'DayinQ') as 'DayinQ';disti = foreach disti generate 'Reseller', 'Revenue',  'Quota',  'DayinQ', 'Revenue'/'Quota' as '% Attained', ('Revenue'/'DayinQ') * 91 as '$ Trend';disti = foreach disti generate 'Reseller', 'Revenue',  'Quota',  'DayinQ', '% Attained','$ Trend', '$ Trend'/'Quota' as '% Trend';result =  union cdw,result;\n\n\nq5 = cogroup result by ('ResellerRep','ConsumerFocus') ,result4 by ('Assignment','Focus');\nq5 = foreach q5 generate result.'ResellerRep' as 'ResellerRep', result.'ConsumerFocus' as 'Focus', sum(result.'Revenue') as 'Revenue', sum(result4.'Quota') as 'Quota', avg(result.'WeekinQ') as 'WeekinQ';\n\nq5 = foreach q5 generate ResellerRep,'Focus','Revenue',  'Quota',  'WeekinQ', 'Revenue'/'Quota' as '% Attained', ('Revenue'/'WeekinQ') * 13 as '$ Trend';\nq5 = foreach q5 generate ResellerRep,'Focus', 'Revenue',  'Quota',  'WeekinQ', '% Attained','$ Trend', '$ Trend'/'Quota' as '% Trend';\nq5 = order q5 by 'ResellerRep';\n\n\nsummary = group q5 by 'ResellerRep';\nsummary = foreach summary generate sum(sum('Revenue')) over([..] partition by all) as 'Revenue_total', sum(sum('Quota')) over([..] partition by all) as 'Quota_total', sum(sum('% Attained')) over([..] partition by all) as '% Attained_total', sum(sum('$ Trend')) over([..] partition by all) as '$ Trend_total', avg('WeekinQ')  as 'WeekinQ_total', sum(sum('% Trend')) over([..] partition by all) as '% Trend_total';\nsummary = limit summary 1;\n\nsummary2 = foreach summary generate \"Total\" as 'ResellerRep','Revenue_total' as 'Revenue', 'Quota_total' as 'Quota', 'Revenue_total' / 'Quota_total' as '% Attained', 'WeekinQ_total' as 'WeekinQ', '$ Trend_total' as '$ Trend', '$ Trend_total' / 'Quota_total' as '% Trend';\nsummary2 = limit summary2 1;\n \n\nfinalresult = union disti, result;\n\nq = load \"SalesData\";\nq = filter q by 'ConsumerAccounts' == \"true\";\nq = filter q by date('INVOICE_DATE_Year', 'INVOICE_DATE_Month', 'INVOICE_DATE_Day') in [dateRange([2016,10,1], [2055,12,31])];\nq1 = filter q by date('INVOICE_DATE_Year', 'INVOICE_DATE_Month', 'INVOICE_DATE_Day') in [dateRange([2019,7,1], [2019,9,30])];cdw = filter q1 by 'CDWProductFo' in [\"IFP/CD/PJ\"];cdw = filter cdw by 'Reseller.Name' == \"CDW\";cdw = group cdw by ('Reseller.Assigned_Rep__c', 'CDWProductFo');cdw = foreach cdw generate q.'Reseller.Assigned_Rep__c' as 'ResellerRep', q.'CDWProductFo' as 'ProductFocusType', sum(q.'REVENUE') as 'Revenue',avg(q.WeekinQ) as 'WeekinQ';cdw = limit cdw 2000;\n\n\nresult = group q by ('ResellerName','ConsumerFocus')  full,q1 by ('ResellerName','ConsumerFocus');\nresult = foreach result generate q.'ResellerName' as 'ResellerName', q.'ConsumerFocus' as 'ConsumerFocus', sum(q1.'REVENUE') as 'Revenue',avg(q.WeekinQ) as 'WeekinQ';\nresult = limit result 2000;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"none","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"visualizationType":"comparisontable"}}},"widgets":{"saql_table":{"parameters":{"borderColor":"#82c238","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"evenRowColor":"#f0f6ea","exploreLink":true,"header":{"backgroundColor":"#6dab26","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#5e981b","innerMinorBorderColor":"#82c238","maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"showRowIndexColumn":true,"step":"saql","totals":true,"verticalPadding":8},"type":"table"}}}